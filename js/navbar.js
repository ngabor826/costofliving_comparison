var substringMatcher = function (strs) {
    return function findMatches(q, cb) {
        var matches, substringRegex;

        // an array that will be populated with substring matches
        matches = [];

        // regex used to determine if a string contains the substring `q`
        substrRegex = new RegExp(q, 'i');

        // iterate through the pool of strings and for any string that
        // contains the substring `q`, add it to the `matches` array
        $.each(strs, function (i, str) {
            if (substrRegex.test(str)) {
                matches.push(str);
            }
        });

        cb(matches);
    };
};

let cities_list = [
    "Hamilton",
    "Basel",
    "Lugano",
    "Zurich",
    "Lausanne",
    "Geneva",
    "Bern",
    "Tromso",
    "Stavanger",
    "Trondheim",
    "Oslo",
    "Bergen",
    "Reykjavik",
    "New-York",
    "Copenhagen",
    "Nagoya",
    "Dubrovnik",
    "Arhus",
    "Paris",
    "Tel-Aviv-Yafo",
    "Honolulu",
    "Aalborg",
    "Alexandria",
    "San-Francisco",
    "Anchorage",
    "Luxembourg",
    "Tokyo",
    "Oakland",
    "Seattle",
    "Queens",
    "Nassau",
    "Boston",
    "Stockholm",
    "Amsterdam",
    "Dublin",
    "Seoul",
    "Sydney",
    "Cork",
    "Osaka",
    "Darwin",
    "Uppsala",
    "Antibes",
    "Odense",
    "London",
    "Haifa",
    "Jerusalem",
    "Utrecht",
    "Galway",
    "Newcastle",
    "Singapore",
    "Washington",
    "Milan",
    "Auckland",
    "Breda",
    "Brisbane",
    "Perth",
    "Beirut",
    "Jersey-City",
    "Canberra",
    "Eindhoven",
    "Lyon",
    "Nice",
    "Strasbourg",
    "Valletta",
    "Bend",
    "Helsinki",
    "Lund",
    "Munich",
    "Minneapolis",
    "Los-Angeles",
    "Oulu",
    "Gold-Coast",
    "Marseille",
    "Rennes",
    "Linz",
    "Groningen",
    "Haarlem",
    "Chicago",
    "Fremont",
    "Leiden",
    "Montpellier",
    "Charleston",
    "Melbourne",
    "Leuven",
    "Brighton",
    "Gothenburg",
    "Genoa",
    "Peterborough",
    "San-Diego",
    "Milwaukee",
    "Gent",
    "Fort-Lauderdale",
    "Hamilton",
    "Graz",
    "Toulouse",
    "Sliema",
    "Antwerp",
    "Christchurch",
    "Brescia",
    "Bergamo",
    "Grenoble",
    "Hong-Kong",
    "Saint-Paul",
    "Brussels",
    "Salzburg",
    "Rome",
    "Nijmegen",
    "Adelaide",
    "Maastricht",
    "Tampa",
    "San-Jose",
    "Espoo",
    "Irvine",
    "Malmo",
    "Limerick",
    "Philadelphia",
    "Rotterdam",
    "Portland",
    "Pittsburgh",
    "Tampere",
    "Parma",
    "Wellington",
    "Nantes",
    "Bologna",
    "Dresden",
    "Miami",
    "Florence",
    "Hobart",
    "Turku",
    "Sacramento",
    "Kingston",
    "Charlotte",
    "New-Orleans",
    "Atlanta",
    "Cleveland",
    "Heidelberg",
    "Burnaby",
    "Trieste",
    "Milton-Keynes",
    "Delft",
    "Toronto",
    "Red-Deer",
    "Frankfurt",
    "Everett",
    "Enschede",
    "Saint-John's",
    "Edinburgh",
    "Verona",
    "Bonn",
    "Augsburg",
    "Lille",
    "Vancouver",
    "Reading",
    "Halifax",
    "Fredericton",
    "Surrey",
    "York",
    "Birmingham",
    "Bristol",
    "Cambridge",
    "Mannheim",
    "Hamburg",
    "Turin",
    "Ann-Arbor",
    "Nuremberg",
    "Rochester",
    "Denver",
    "The-Hague-Den-Haag-Netherlands",
    "Bellingham",
    "Aberdeen",
    "Erlangen",
    "Swansea",
    "Stuttgart",
    "Cologne",
    "Victoria",
    "Spokane",
    "Colorado-Springs",
    "Calgary",
    "Baltimore",
    "Berlin",
    "Nashville",
    "Dusseldorf",
    "Edmonton",
    "Oxford",
    "Portsmouth",
    "Columbus",
    "Buffalo",
    "Guelph",
    "Albany",
    "Vienna",
    "Winnipeg",
    "Coventry",
    "Lincoln",
    "Plymouth",
    "Regina",
    "Manchester",
    "Nottingham",
    "Southampton",
    "Mississauga",
    "Ottawa",
    "Dortmund",
    "Fribourg",
    "San-Juan",
    "Olympia",
    "Macao",
    "Riverside",
    "Saskatoon",
    "Omaha",
    "Raleigh",
    "Exeter",
    "Nanaimo",
    "Birmingham",
    "Padova",
    "Brampton",
    "Orlando",
    "Naples",
    "Derby",
    "Nicosia",
    "Norwich",
    "Glasgow",
    "Limassol",
    "Las-Vegas",
    "Vancouver",
    "Cagliari",
    "Detroit",
    "Jacksonville",
    "Markham",
    "Karlsruhe",
    "North-Vancouver-Canada",
    "Coquitlam",
    "Liverpool",
    "Cardiff",
    "Fort-Worth",
    "Darmstadt",
    "Dundee",
    "Hanover",
    "Kansas-City",
    "Montreal",
    "Madison",
    "Bremen",
    "Leicester",
    "Hamilton",
    "Essen",
    "Saint-Louis",
    "Richmond",
    "Bilbao",
    "Quebec-City",
    "Fresno",
    "Zadar",
    "Barcelona",
    "Stoke-On-Trent",
    "Eugene",
    "Sheffield",
    "Lincoln",
    "Aachen",
    "Newcastle-Upon-Tyne",
    "Des-Moines",
    "Kitchener",
    "Dubai",
    "Louisville",
    "Indianapolis",
    "Kelowna",
    "Knoxville",
    "Taipei",
    "Madrid",
    "Tucson",
    "Leipzig",
    "Bournemouth",
    "London",
    "Reno",
    "Phoenix",
    "Houston",
    "Baton-Rouge",
    "Leeds",
    "Akron",
    "Belfast",
    "Albuquerque",
    "Windsor",
    "Huntsville",
    "Dallas",
    "Kingston-Upon-Hull",
    "Little-Rock",
    "Doha",
    "Oklahoma-City",
    "San-Antonio",
    "Salt-Lake-City",
    "Tulsa",
    "Catania",
    "Boise",
    "Thessaloniki",
    "Larnaca",
    "Cincinnati",
    "Austin",
    "Ljubljana",
    "Palma-De-Mallorca",
    "Chattanooga",
    "Memphis",
    "Kaohsiung",
    "Athens",
    "Bari",
    "Zaragoza-Saragossa",
    "Palermo",
    "Heraklion",
    "Patras",
    "Granada",
    "Rijeka",
    "Wichita",
    "Lexington",
    "Tallinn",
    "Abu-Dhabi",
    "Port-Of-Spain",
    "Split",
    "Makati",
    "Addis-Ababa",
    "Male",
    "Panama-City",
    "Sevilla",
    "Manama",
    "Harare",
    "Malaga",
    "Alicante",
    "Maribor",
    "Murcia",
    "Tartu",
    "Abidjan",
    "Santa-Cruz-De-Tenerife",
    "Riga",
    "Paphos",
    "Valencia",
    "Funchal",
    "Ajman",
    "Bangkok",
    "Lisbon",
    "Zagreb",
    "Havana",
    "El-Paso",
    "Kingston",
    "Porto",
    "Amman",
    "Braga",
    "Prague",
    "Bratislava",
    "San-Jose",
    "Shanghai",
    "Sharjah",
    "Coimbra",
    "Riyadh",
    "Muscat",
    "Pattaya",
    "Phuket",
    "Klaipeda",
    "Jeddah-Jiddah",
    "Santiago",
    "Aveiro",
    "Kosice",
    "Brno",
    "Montevideo",
    "Kuwait-City",
    "Shenzhen",
    "Vilnius",
    "Ad-Dammam",
    "Wuhan",
    "Suva",
    "Kaunas",
    "Paramaribo",
    "Warsaw",
    "Osijek",
    "Phnom-Penh",
    "Chiang-Mai",
    "Johannesburg",
    "Beijing",
    "Olomouc",
    "Pretoria",
    "Budapest",
    "Gdansk",
    "Ostrava",
    "Bali",
    "Guatemala-City",
    "Chengdu",
    "San-Salvador",
    "Poznan",
    "Gdynia",
    "Krakow-Cracow",
    "Sofia",
    "Petaling-Jaya",
    "Wroclaw",
    "Gaborone",
    "Davao",
    "Quito",
    "Cape-Town",
    "Bucharest",
    "Johor-Bahru",
    "Manila",
    "Guangzhou",
    "Jakarta",
    "Belgrade",
    "Santo-Domingo",
    "Guayaquil",
    "Podgorica",
    "Quezon-City",
    "Tirana",
    "Lodz",
    "Cebu",
    "Szeged",
    "Kuala-Lumpur",
    "Marrakech",
    "Accra",
    "Banja-Luka",
    "Debrecen",
    "Varna",
    "Cluj-napoca",
    "Durban",
    "Plovdiv",
    "Lublin",
    "Szczecin",
    "Constanta",
    "Hangzhou",
    "Moscow",
    "Katowice",
    "Sarajevo",
    "Brasov",
    "Erbil-Irbil-Iraq",
    "Yangon",
    "Penang",
    "Burgas",
    "Tangier",
    "Mexico-City",
    "Novi-Sad",
    "Casablanca",
    "Tehran",
    "Baghdad",
    "Iasi",
    "Monterrey",
    "Lima",
    "Sibiu",
    "Vladivostok",
    "Ho-Chi-Minh-City",
    "Oradea",
    "Timisoara",
    "La-Paz",
    "As-Sulaymaniyah",
    "Sao-Paulo",
    "Rabat",
    "Skopje",
    "Arad",
    "Nairobi",
    "Da-Nang",
    "Hanoi",
    "Tijuana",
    "Maputo",
    "Surabaya",
    "Dar-Es-Salaam",
    "Craiova",
    "Cancun",
    "Bandung",
    "Merida",
    "Agadir",
    "Lagos",
    "Campinas",
    "Queretaro",
    "Saint-Petersburg",
    "Puerto-Vallarta",
    "Kampala",
    "Nis",
    "Aguascalientes",
    "Brasilia",
    "Cuenca",
    "Dhaka",
    "Rio-De-Janeiro",
    "Yerevan",
    "Buenos-Aires",
    "Guadalajara",
    "Colombo",
    "Yogyakarta",
    "Kigali",
    "Al-Marsa",
    "Bogota",
    "Florianopolis",
    "Chisinau",
    "Nizhny-Novgorod-Russia",
    "Tyumen-Russia",
    "Belo-Horizonte",
    "Porto-Alegre",
    "Irkutsk-Russia",
    "Fortaleza",
    "Samara",
    "Istanbul",
    "Ulaanbaatar",
    "Recife",
    "Zapopan-Mexico",
    "Puebla",
    "Gurgaon",
    "Chittagong",
    "Minsk",
    "Damascus",
    "Baku",
    "Cairo-Egypt",
    "Kaliningrad",
    "Rostov-na-donu",
    "Astana-Nur-Sultan-Kazakhstan",
    "Kiev",
    "Krasnoyarsk",
    "Novosibirsk",
    "Medellin",
    "Curitiba",
    "Barranquilla",
    "Tunis",
    "Natal",
    "Ufa",
    "Yekaterinburg",
    "Odesa",
    "Perm",
    "Omsk",
    "Voronezh",
    "Krasnodar",
    "Goiania",
    "Asuncion",
    "Kathmandu",
    "Lusaka",
    "Algiers",
    "Kazan",
    "Volgograd-Russia",
    "Ankara",
    "Salvador",
    "Saratov",
    "Izmir",
    "Tomsk",
    "Kharkiv",
    "Bursa",
    "Chandigarh",
    "Chelyabinsk",
    "Mumbai",
    "Almaty",
    "Cali",
    "Lviv",
    "Mykolayiv-Ukraine",
    "Dnipropetrovsk",
    "Izhevsk",
    "Pristina",
    "Goa",
    "Bucaramanga",
    "Alexandria",
    "Antalya",
    "Tbilisi",
    "Noida",
    "Vinnytsya-Ukraine",
    "Zaporizhzhya",
    "Ivano-Frankivsk",
    "Tashkent",
    "Delhi",
    "Bangalore",
    "Batumi",
    "Ranchi",
    "Ghaziabad",
    "Ternopil-Ukraine",
    "Thane",
    "Guwahati",
    "Hyderabad",
    "Sumy",
    "Ahmedabad",
    "Kolkata",
    "Pune",
    "Navi-Mumbai",
    "Chennai",
    "Surat",
    "Patna",
    "Indore",
    "Jaipur",
    "Vadodara",
    "Rawalpindi",
    "Nagpur",
    "Coimbatore",
    "Islamabad",
    "Lucknow-Lakhnau",
    "Madurai",
    "Bishkek",
    "Kochi",
    "Rajkot",
    "Vijayawada",
    "Kozhikode-Calicut",
    "Mysore",
    "Bhopal",
    "Raipur",
    "Lahore",
    "Visakhapatnam",
    "Bhubaneswar",
    "Karachi",
    "Thiruvananthapuram"
]

// Register suggestion engine on cities array
var cities = new Bloodhound({
    datumTokenizer: Bloodhound.tokenizers.whitespace,
    queryTokenizer: Bloodhound.tokenizers.whitespace,
    local: cities_list
});

// console.log(cities)

$('#city1').typeahead({
    hint: true,
    highlight: true,
    minLength: 1
}, {
    name: 'city1',
    source: cities,
});

$('#city2').typeahead({
    hint: true,
    highlight: true,
    minLength: 1
}, {
    name: 'city2',
    source: cities,
});

let city1_input = document.querySelector('#city1')
let city2_input = document.querySelector('#city2')
let submitButton = document.querySelector('#submit-cities-button');
let placeholderCity1 = document.querySelector('#city1-placeholder')
let placeholderCity2 = document.querySelector('#city2-placeholder')

let selectedCity1 = 'Cluj-napoca';
let selectedCity2 = 'Paris';

function isContained(searched_element, collection) {
    for (i in collection) {
        if(collection[i] === searched_element) {
            return true;
        }
    }
    return false;
}